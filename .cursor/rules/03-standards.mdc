---
description: cursor.directory 표준을 기반으로 한 Next.js(App Router)+TS+Tailwind+Supabase 엔지니어링 규칙.
globs: ["**/*.{ts,tsx,js,jsx}"]
alwaysApply: true
---

# Next.js / React (App Router)

- 가능한 한 **React Server Components(RSC)** 와 서버 렌더링 기능을 우선한다.
- `'use client'`는 Web API 접근/국소 상호작용이 필요한 작은 컴포넌트에만 제한한다.
- 데이터 패칭 컴포넌트에는 항상 **loading/error 상태**를 포함한다.
- `error.tsx`, `global-error.tsx`를 활용해 예외를 사용자 친화적으로 처리한다.

# TypeScript / 코드 품질

- 정확하고 읽기 쉬운 TypeScript를 작성한다. (타입 캐스팅 남발 금지)
- 함수/훅/유틸은 작고 단일 책임으로 쪼갠다.
- Boolean 변수명은 is/has/should 같은 보조동사를 사용한다.
- 파일/폴더명은 소문자 + 대시(kebab-case)를 기본으로 한다.
- `tmp-v0/`는 **백업용 소스**이며, 앞으로 **빌드/타입체크/린트/기능 개발 범위에서 제외**한다. (검색/리팩터링/임포트/참조 금지)

# Supabase

- 인증은 Supabase Auth를 사용하고, DB 접근은 “서버에서 안전하게” 수행한다.
- inquiries는 “본인만 조회/삭제”가 되도록 RLS 또는 서버 검증을 반드시 둔다.
- 예상 가능한 에러는 사용자에게 보여줄 수 있는 메시지로 모델링한다.

# Tailwind

- 유틸리티 우선으로 스타일링하고, 반복 패턴은 컴포넌트화한다.
- 반응형은 mobile-first로 작성한다.

# 에러 처리 / 로깅

- 입력 값은 서버에서도 검증한다. (클라이언트 검증만으로 끝내지 않음)
- 외부 AI 호출 실패 시:
  - UI: 실패 안내 + 재시도 제공
  - DB: inquiry는 남을 수 있으며, 이후 업데이트로 복구 가능

# 테스트/회귀 방지 (가벼운 원칙)

- 핵심 사용자 흐름(로그인→문의→AI→저장→마이페이지)을 깨는 변경은 피한다.
- 리팩터링 시 동일 시나리오를 빠르게 수동 점검할 수 있게, 변경 범위를 작게 유지한다.
